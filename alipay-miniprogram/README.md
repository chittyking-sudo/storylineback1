# æ¸¸æˆå†…å®¹ç”Ÿæˆå™¨ - æ”¯ä»˜å®å°ç¨‹åºç‰ˆ

åŸºäº AI æŠ€æœ¯çš„æ¸¸æˆå†…å®¹è‡ªåŠ¨ç”Ÿæˆå·¥å…·ï¼Œæ”¯ä»˜å®å°ç¨‹åºç‰ˆæœ¬ã€‚

## ğŸ“± åŠŸèƒ½ç‰¹æ€§

- âœ… **æ™ºèƒ½ç”Ÿæˆ**ï¼šåŸºäº AI è‡ªåŠ¨ç”Ÿæˆæ¸¸æˆå†…å®¹
- âœ… **å¤šç§ç±»å‹**ï¼šæ”¯æŒ 10+ ç§æ¸¸æˆç±»å‹
- âœ… **å®Œæ•´å†…å®¹**ï¼šä¸–ç•Œè§‚ã€å‰§æƒ…ã€è§’è‰²ã€å¯¹è¯ç­‰ 8+ ç§å†…å®¹ç±»å‹
- âœ… **å¤šæ¨¡å‹**ï¼šæ”¯æŒ Geminiã€GPT-4oã€Claude ç­‰ 4 ç§ AI æ¨¡å‹
- âœ… **æœ¬åœ°å­˜å‚¨**ï¼šé¡¹ç›®æ•°æ®æœ¬åœ°ç¼“å­˜
- âœ… **å“åº”å¼è®¾è®¡**ï¼šé€‚é…å„ç§å±å¹•å°ºå¯¸

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
alipay-miniprogram/
â”œâ”€â”€ pages/                  # é¡µé¢ç›®å½•
â”‚   â”œâ”€â”€ index/             # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ index.axml
â”‚   â”‚   â”œâ”€â”€ index.acss
â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â””â”€â”€ index.json
â”‚   â”œâ”€â”€ create/            # åˆ›å»ºé¡µé¢
â”‚   â”œâ”€â”€ projects/          # é¡¹ç›®åˆ—è¡¨
â”‚   â””â”€â”€ detail/            # é¡¹ç›®è¯¦æƒ…
â”œâ”€â”€ components/            # è‡ªå®šä¹‰ç»„ä»¶
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ request.js        # HTTP è¯·æ±‚å°è£…
â”‚   â”œâ”€â”€ api.js            # API æ¥å£å®šä¹‰
â”‚   â””â”€â”€ util.js           # é€šç”¨å·¥å…·å‡½æ•°
â”œâ”€â”€ assets/               # é™æ€èµ„æº
â”‚   â””â”€â”€ images/           # å›¾ç‰‡èµ„æº
â”œâ”€â”€ styles/               # å…¬å…±æ ·å¼
â”œâ”€â”€ app.js                # å°ç¨‹åºå…¥å£
â”œâ”€â”€ app.json              # å…¨å±€é…ç½®
â”œâ”€â”€ app.acss              # å…¨å±€æ ·å¼
â””â”€â”€ README.md             # è¯´æ˜æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¼€å‘å·¥å…·

ä¸‹è½½å¹¶å®‰è£… [æ”¯ä»˜å®å°ç¨‹åºå¼€å‘è€…å·¥å…·](https://opendocs.alipay.com/mini/ide/download)

### 2. å¯¼å…¥é¡¹ç›®

1. æ‰“å¼€æ”¯ä»˜å®å°ç¨‹åºå¼€å‘è€…å·¥å…·
2. é€‰æ‹©ã€Œå¯¼å…¥é¡¹ç›®ã€
3. é€‰æ‹© `alipay-miniprogram` ç›®å½•
4. è¾“å…¥ AppIDï¼ˆæµ‹è¯•å¯ä½¿ç”¨æµ‹è¯• AppIDï¼‰

### 3. é…ç½® API åœ°å€

ç¼–è¾‘ `app.js`ï¼Œä¿®æ”¹ API åŸºç¡€åœ°å€ï¼š

```javascript
globalData: {
  // ä¿®æ”¹ä¸ºå®é™…éƒ¨ç½²çš„åç«¯åœ°å€
  apiBase: 'https://your-domain.com'
}
```

### 4. è¿è¡Œè°ƒè¯•

- ç‚¹å‡»ã€ŒçœŸæœºè°ƒè¯•ã€æ‰«ç åœ¨æ”¯ä»˜å®ä¸­é¢„è§ˆ
- æˆ–åœ¨æ¨¡æ‹Ÿå™¨ä¸­è¿è¡Œ

## ğŸ“„ é¡µé¢è¯´æ˜

### é¦–é¡µ (pages/index)

- åŠŸèƒ½ä»‹ç»
- ä½¿ç”¨ç»Ÿè®¡
- å¿«é€Ÿå¼€å§‹å…¥å£
- æœåŠ¡å¥åº·æ£€æŸ¥

### åˆ›å»ºé¡µé¢ (pages/create) âœ… å·²å®Œæˆ

- âœ… é¡¹ç›®åç§°è¾“å…¥
- âœ… æ¸¸æˆç±»å‹é€‰æ‹©ï¼ˆ10 ç§ï¼‰ï¼šRPGã€å†’é™©è§£è°œã€åŠ¨ä½œæ¸¸æˆã€ç­–ç•¥æ¸¸æˆã€æ¨¡æ‹Ÿç»è¥ã€ææ€–æƒŠæ‚šã€ç§‘å¹»å¤ªç©ºã€å¥‡å¹»é­”æ³•ã€æ‚¬ç–‘æ¨ç†ã€æ‹çˆ±å…»æˆ
- âœ… å†…å®¹ç±»å‹é€‰æ‹©ï¼ˆ8 ç§ï¼‰ï¼šä¸–ç•Œè§‚ã€ä¸»çº¿å‰§æƒ…ã€æ”¯çº¿ä»»åŠ¡ã€è§’è‰²è®¾å®šã€å¯¹è¯è„šæœ¬ã€é“å…·ç³»ç»Ÿã€åœ°ç‚¹åœºæ™¯ã€å®Œæ•´å†…å®¹
- âœ… è¯¦ç»†æè¿°ï¼ˆå¯é€‰ï¼‰
- âœ… AI æ¨¡å‹é€‰æ‹©ï¼ˆ4 ç§ï¼‰ï¼šGemini 2.0 Flashã€GPT-4o-miniã€GPT-4oã€Claude 3.5 Sonnet
- âœ… è¡¨å•éªŒè¯å’Œé”™è¯¯æç¤º
- âœ… ç”Ÿæˆç¡®è®¤å¯¹è¯æ¡†
- âœ… æäº¤ç”Ÿæˆè¯·æ±‚
- âœ… Loading çŠ¶æ€æ˜¾ç¤º

### é¡¹ç›®åˆ—è¡¨ (pages/projects)

- æ˜¾ç¤ºæ‰€æœ‰å·²åˆ›å»ºé¡¹ç›®
- é¡¹ç›®å¡ç‰‡å±•ç¤º
- ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…
- ä¸‹æ‹‰åˆ·æ–°
- ç©ºçŠ¶æ€æç¤º

### é¡¹ç›®è¯¦æƒ… (pages/detail) âœ… å·²å®Œæˆ

- âœ… é¡¹ç›®åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€æ¸¸æˆç±»å‹ã€å†…å®¹ç±»å‹ã€AI æ¨¡å‹ã€åˆ›å»ºæ—¶é—´ï¼‰
- âœ… è¯¦ç»†æè¿°å±•ç¤º
- âœ… ç”Ÿæˆå†…å®¹å±•ç¤º
- âœ… ä¸–ç•Œè§‚å®Œæ•´å±•ç¤ºï¼ˆæ ‡é¢˜ã€å†å²èƒŒæ™¯ã€åœ°ç†ç¯å¢ƒã€æ–‡åŒ–ä½“ç³»ï¼‰
- âœ… è§’è‰²åˆ—è¡¨å±•ç¤ºï¼ˆå§“åã€è§’è‰²å®šä½ã€æ€§æ ¼ç‰¹ç‚¹ã€èƒŒæ™¯æ•…äº‹ï¼‰
- âœ… å†…å®¹å¤åˆ¶åŠŸèƒ½ï¼ˆæ”¯æŒå¤åˆ¶ç”Ÿæˆå†…å®¹å’Œä¸–ç•Œè§‚ï¼‰
- âœ… åˆ†äº«åŠŸèƒ½
- âœ… å¯¼å‡ºåŠŸèƒ½ï¼ˆJSON æ ¼å¼ / Markdown æ ¼å¼ï¼‰
- âœ… ä¸‹æ‹‰åˆ·æ–°
- âœ… Loading å’Œé”™è¯¯çŠ¶æ€å¤„ç†
- âœ… è¿”å›æŒ‰é’®

## ğŸ”§ é…ç½®è¯´æ˜

### app.json é…ç½®

```json
{
  "pages": [
    "pages/index/index",
    "pages/create/create",
    "pages/projects/projects",
    "pages/detail/detail"
  ],
  "window": {
    "defaultTitle": "æ¸¸æˆå†…å®¹ç”Ÿæˆå™¨",
    "titleBarColor": "#f0d7b7"
  },
  "tabBar": {
    "items": [
      { "pagePath": "pages/index/index", "name": "é¦–é¡µ" },
      { "pagePath": "pages/create/create", "name": "åˆ›å»º" },
      { "pagePath": "pages/projects/projects", "name": "é¡¹ç›®" }
    ]
  }
}
```

### æƒé™å£°æ˜

å¦‚éœ€ä½¿ç”¨ä»¥ä¸‹åŠŸèƒ½ï¼Œéœ€åœ¨ `app.json` ä¸­å£°æ˜ï¼š

- ç½‘ç»œè¯·æ±‚ï¼šé»˜è®¤å…è®¸
- æœ¬åœ°å­˜å‚¨ï¼šé»˜è®¤å…è®¸
- å‰ªè´´æ¿ï¼šéœ€è¦ç”¨æˆ·æˆæƒ

## ğŸ“¡ API æ¥å£

### åç«¯ API

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/projects` | GET | è·å–é¡¹ç›®åˆ—è¡¨ |
| `/api/projects/:id` | GET | è·å–é¡¹ç›®è¯¦æƒ… |
| `/api/generate` | POST | åˆ›å»ºå¹¶ç”Ÿæˆå†…å®¹ |
| `/api/projects/:id/export` | GET | å¯¼å‡ºé¡¹ç›® |
| `/api/health` | GET | å¥åº·æ£€æŸ¥ |

### è¯·æ±‚ç¤ºä¾‹

```javascript
// ä½¿ç”¨å°è£…çš„ API æ–¹æ³•
const api = require('../../utils/api.js');

// è·å–é¡¹ç›®åˆ—è¡¨
const projects = await api.getProjects();

// åˆ›å»ºé¡¹ç›®
const result = await api.createProject({
  name: 'é­”æ³•å­¦é™¢',
  game_type: 'rpg',
  content_type: 'worldview',
  description: 'ä¸€ä¸ªé­”æ³•ä¸ç§‘æŠ€å¹¶å­˜çš„ä¸–ç•Œ',
  ai_model: 'gemini'
});
```

## ğŸ¨ æ ·å¼ç³»ç»Ÿ

### é¢œè‰²å˜é‡

```css
--bg-beige: #f0d7b7;      /* ç±³è‰²èƒŒæ™¯ */
--retro-pink: #e66285;    /* ç²‰è‰² */
--retro-green: #2c9560;   /* ç»¿è‰² */
--retro-blue: #5c7cfa;    /* è“è‰² */
--border-color: #000100;  /* é»‘è‰²è¾¹æ¡† */
```

### å…¬å…±æ ·å¼ç±»

- `.container` - é¡µé¢å®¹å™¨
- `.card` - å¡ç‰‡æ ·å¼
- `.btn` - æŒ‰é’®åŸºç¡€æ ·å¼
- `.btn-primary` - ä¸»è¦æŒ‰é’®
- `.btn-secondary` - æ¬¡è¦æŒ‰é’®
- `.form-group` - è¡¨å•ç»„
- `.hero` - Hero åŒºåŸŸ

## ğŸ› ï¸ å·¥å…·å‡½æ•°

### request.js - HTTP è¯·æ±‚

```javascript
const { get, post } = require('../../utils/request.js');

// GET è¯·æ±‚
const data = await get('/api/projects');

// POST è¯·æ±‚
const result = await post('/api/generate', { name: 'é¡¹ç›®å' });
```

### util.js - é€šç”¨å·¥å…·

```javascript
const util = require('../../utils/util.js');

// æ ¼å¼åŒ–æ—¥æœŸ
util.formatDate(new Date(), 'YYYY-MM-DD');

// è·å–ç±»å‹åç§°
util.getGameTypeName('rpg');        // 'è§’è‰²æ‰®æ¼”æ¸¸æˆ (RPG)'
util.getContentTypeName('story');   // 'ä¸»çº¿å‰§æƒ…'
util.getAIModelName('gemini');      // 'Google Gemini 2.0 Flash'

// å­—ç¬¦ä¸²æˆªå–
util.truncate('å¾ˆé•¿çš„æ–‡æœ¬...', 20);

// è¡¨å•éªŒè¯
util.validateForm(data, rules);
```

## ğŸ“¦ ç»„ä»¶å¼€å‘

### åˆ›å»ºè‡ªå®šä¹‰ç»„ä»¶

```
components/
â””â”€â”€ loading/
    â”œâ”€â”€ loading.axml
    â”œâ”€â”€ loading.acss
    â”œâ”€â”€ loading.js
    â””â”€â”€ loading.json
```

### ä½¿ç”¨ç»„ä»¶

åœ¨é¡µé¢ JSON ä¸­å£°æ˜ï¼š

```json
{
  "usingComponents": {
    "loading": "/components/loading/loading"
  }
}
```

åœ¨ AXML ä¸­ä½¿ç”¨ï¼š

```xml
<loading show="{{isLoading}}" />
```

## ğŸš€ å‘å¸ƒä¸Šçº¿

### 1. å®Œå–„ä¿¡æ¯

- å°ç¨‹åºåç§°ã€å›¾æ ‡
- ç±»ç›®é€‰æ‹©
- éšç§æ”¿ç­–

### 2. ä¸Šä¼ ä»£ç 

åœ¨å¼€å‘è€…å·¥å…·ä¸­ç‚¹å‡»ã€Œä¸Šä¼ ã€ï¼Œå¡«å†™ç‰ˆæœ¬å·å’Œå¤‡æ³¨

### 3. æäº¤å®¡æ ¸

ç™»å½• [æ”¯ä»˜å®å¼€æ”¾å¹³å°](https://open.alipay.com/)ï¼Œæäº¤å®¡æ ¸

### 4. å‘å¸ƒ

å®¡æ ¸é€šè¿‡åï¼Œç‚¹å‡»ã€Œå‘å¸ƒã€

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

1. **API å¯†é’¥**ï¼šä¸è¦åœ¨å°ç¨‹åºä»£ç ä¸­ç¡¬ç¼–ç  API å¯†é’¥
2. **HTTPS**ï¼šåç«¯æ¥å£å¿…é¡»ä½¿ç”¨ HTTPS
3. **æ•°æ®éªŒè¯**ï¼šå‰ç«¯å’Œåç«¯éƒ½è¦è¿›è¡Œæ•°æ®éªŒè¯
4. **ç”¨æˆ·éšç§**ï¼šéµå®ˆã€Šä¸ªäººä¿¡æ¯ä¿æŠ¤æ³•ã€‹

## ğŸ› å¸¸è§é—®é¢˜

### 1. æ— æ³•è¯·æ±‚ç½‘ç»œ

- æ£€æŸ¥ API åœ°å€æ˜¯å¦æ­£ç¡®
- ç¡®ä¿åç«¯æœåŠ¡è¿è¡Œæ­£å¸¸
- æ£€æŸ¥ç½‘ç»œè¿æ¥

### 2. çœŸæœºè°ƒè¯•å¤±è´¥

- ç¡®ä¿æ‰‹æœºå·²ç™»å½•æ”¯ä»˜å®
- æ£€æŸ¥å¼€å‘è€…å·¥å…·ç‰ˆæœ¬
- é‡æ–°æ‰«ç å°è¯•

### 3. é¡µé¢ä¸æ˜¾ç¤º

- æ£€æŸ¥ app.json ä¸­é¡µé¢è·¯å¾„
- æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
- ç¡®è®¤ axml è¯­æ³•æ­£ç¡®

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æ”¯ä»˜å®å°ç¨‹åºå®˜æ–¹æ–‡æ¡£](https://opendocs.alipay.com/mini)
- [API å‚è€ƒ](https://opendocs.alipay.com/mini/api)
- [ç»„ä»¶è¯´æ˜](https://opendocs.alipay.com/mini/component)
- [å¼€å‘è€…å·¥å…·](https://opendocs.alipay.com/mini/ide)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

ISC License

---

**ç‰ˆæœ¬**: v3.1  
**æœ€åæ›´æ–°**: 2025-11-23  
**åç«¯é¡¹ç›®**: https://github.com/chittyking-sudo/storylineback1

## ğŸ“ å¼€å‘è¿›åº¦

### âœ… å·²å®ŒæˆåŠŸèƒ½

1. **é¦–é¡µ (pages/index)** - 100%
   - åŠŸèƒ½ä»‹ç»å’Œç‰¹æ€§å±•ç¤º
   - ç»Ÿè®¡æ•°æ®æ˜¾ç¤º
   - å¿«é€Ÿå¼€å§‹æŒ‰é’®
   - æœåŠ¡å¥åº·æ£€æŸ¥

2. **åˆ›å»ºé¡µé¢ (pages/create)** - 100%
   - å®Œæ•´è¡¨å•å®ç°ï¼ˆé¡¹ç›®åç§°ã€æ¸¸æˆç±»å‹ã€å†…å®¹ç±»å‹ã€AI æ¨¡å‹ã€è¯¦ç»†æè¿°ï¼‰
   - ä¸‰ä¸ª Picker é€‰æ‹©å™¨ç»„ä»¶
   - è¡¨å•éªŒè¯å’Œé”™è¯¯å¤„ç†
   - API é›†æˆå’Œæäº¤åŠŸèƒ½
   - Loading çŠ¶æ€ç®¡ç†

3. **é¡¹ç›®åˆ—è¡¨ (pages/projects)** - 100%
   - é¡¹ç›®å¡ç‰‡å±•ç¤º
   - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…
   - ä¸‹æ‹‰åˆ·æ–°
   - ç©ºçŠ¶æ€æç¤º
   - é”™è¯¯å¤„ç†

4. **é¡¹ç›®è¯¦æƒ… (pages/detail)** - 100%
   - å®Œæ•´ä¿¡æ¯å±•ç¤ºï¼ˆå…ƒæ•°æ®ã€æè¿°ã€å†…å®¹ã€ä¸–ç•Œè§‚ã€è§’è‰²ï¼‰
   - å¤åˆ¶åŠŸèƒ½ï¼ˆå†…å®¹å’Œä¸–ç•Œè§‚ï¼‰
   - åˆ†äº«åŠŸèƒ½
   - å¯¼å‡ºåŠŸèƒ½ï¼ˆJSON/Markdownï¼‰
   - ä¸‹æ‹‰åˆ·æ–°
   - Loading å’Œé”™è¯¯çŠ¶æ€

### ğŸ”§ æŠ€æœ¯å®ç°

- âœ… å…¨å±€é…ç½®å’Œæ ·å¼ç³»ç»Ÿ
- âœ… HTTP è¯·æ±‚å°è£…ï¼ˆPromise åŒ…è£…ï¼‰
- âœ… API æ¥å£å®šä¹‰
- âœ… å·¥å…·å‡½æ•°åº“ï¼ˆæ—¥æœŸæ ¼å¼åŒ–ã€ç±»å‹è½¬æ¢ã€éªŒè¯ç­‰ï¼‰
- âœ… TabBar å¯¼èˆªï¼ˆä¸‰ä¸ªæ ‡ç­¾é¡µï¼‰
- âœ… é¡µé¢é—´å¯¼èˆªï¼ˆswitchTab, navigateToï¼‰
- âœ… æ•°æ®çŠ¶æ€ç®¡ç†

## âš ï¸ é‡è¦æç¤º

**æœ¬å°ç¨‹åºä¸ºå‰ç«¯æ¼”ç¤ºç‰ˆæœ¬ï¼Œå®Œæ•´åŠŸèƒ½éœ€è¦é…åˆåç«¯ API ä½¿ç”¨ã€‚**

åç«¯éƒ¨ç½²åœ°å€é…ç½®åœ¨ `app.js` çš„ `globalData.apiBase` ä¸­ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹ã€‚

å¼€å‘æ—¶å¯ä½¿ç”¨ä»¥ä¸‹æµ‹è¯•åœ°å€ï¼š
```
https://3000-imt0hr8ioseb4qc1ytnn4-2b54fc91.sandbox.novita.ai
```

ç”Ÿäº§ç¯å¢ƒè¯·éƒ¨ç½²åˆ° Cloudflare Pages å¹¶ä½¿ç”¨è‡ªå®šä¹‰åŸŸåã€‚
